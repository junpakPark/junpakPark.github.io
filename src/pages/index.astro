---
import {type CollectionEntry, getCollection} from "astro:content";

import BaseLayout from "../layouts/BaseLayout.astro";
import HomeLayout from "../layouts/HomeLayout.astro";
import {processPosts} from "../utils";

const allPosts: CollectionEntry<"blog">[] = await getCollection("blog");
const recentPost: CollectionEntry<"blog">[] = processPosts(allPosts, {limit: 9})

const shuffledSeries: CollectionEntry<"series">[] = (
    await getCollection("series")
).sort((a, b) => Math.random() - 0.5);
---

<BaseLayout>
    <HomeLayout shuffledSeries={shuffledSeries} recentPost={recentPost}/>
</BaseLayout>
