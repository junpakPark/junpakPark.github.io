---
import { type CollectionEntry, getCollection } from "astro:content";

import BaseLayout from "../layouts/BaseLayout.astro";
import HomeLayout from "../layouts/HomeLayout.astro";

const recentPost: CollectionEntry<"blog">[] = (await getCollection("blog"))
  .sort(
    (a: CollectionEntry<"blog">, b: CollectionEntry<"blog">) =>
      b.data.date.valueOf() - a.data.date.valueOf()
  )
  .slice(0, 9);

const shuffledSeries: CollectionEntry<"series">[] = (
  await getCollection("series")
).sort((a, b) => Math.random() - 0.5);
---

<BaseLayout>
  <HomeLayout shuffledSeries={shuffledSeries} recentPost={recentPost} />
</BaseLayout>
